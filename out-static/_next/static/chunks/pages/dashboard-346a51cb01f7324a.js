(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{7100:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(8911)}])},6823:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(4848);s(6540);var n=s(8071),r=s(4668);let l=e=>{let{isOpen:t,onClose:s,onConfirm:l,title:c,message:o,confirmText:a="Confirm",cancelText:d="Cancel",confirmButtonVariant:u="primary"}=e;return t?(0,i.jsx)(n.bL,{open:t,onOpenChange:s,children:(0,i.jsxs)(n.ZL,{children:[(0,i.jsx)(n.hJ,{className:"fixed inset-0 bg-black/30 z-40 data-[state=open]:animate-overlayShow"}),(0,i.jsxs)(n.UC,{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-xl p-6 w-full max-w-md z-50 data-[state=open]:animate-contentShow focus:outline-none",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)(n.hE,{className:"text-lg font-semibold text-gray-900",children:c}),(0,i.jsx)(n.ZD,{asChild:!0,children:(0,i.jsx)("button",{className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close",onClick:s,children:(0,i.jsx)(r.A,{className:"w-5 h-5"})})})]}),(0,i.jsx)(n.VY,{className:"text-sm text-gray-600 mb-6",children:o}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,i.jsx)(n.ZD,{asChild:!0,children:(0,i.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",onClick:s,children:d})}),(0,i.jsx)(n.rc,{asChild:!0,children:(0,i.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ".concat((()=>{switch(u){case"danger":return"bg-red-600 hover:bg-red-700 focus:ring-red-500";case"warning":return"bg-amber-500 hover:bg-amber-600 focus:ring-amber-500";default:return"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}})()),onClick:()=>{l(),s()},children:a})})]})]})]})}):null}},8911:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var i=s(4848),n=s(6540),r=s(6715),l=s(3481),c=s(9965),o=s.n(c),a=s(1895),d=s(4170),u=s(3881),h=s(990),m=s(2876),x=s(2636),g=s(8774),f=s(3741),y=s(4064),p=s(1811),b=s(2338),j=s(8757),v=s(4175),w=s(177),N=s(4974),C=s(4668),k=s(6857),A=s(6823);let _=e=>{let{symbol:t}=e;return(0,i.jsx)("img",{src:(e=>{let t=e.toLowerCase();return"sui"===t?"/images/sui-sui-logo.svg":"usdc"===t?"/images/usd-coin-usdc-logo.svg":["usdt","btc","eth"].includes(t)?"/assets/icons/".concat(t,".svg"):"/assets/icons/unknown.svg"})(t),alt:"".concat(t," icon"),className:"w-5 h-5 mr-2",style:{objectFit:"contain"},onError:e=>{console.error("Failed to load icon for ".concat(t)),e.target.src="/assets/icons/unknown.svg"}})};function D(){let e=(0,r.useRouter)(),{isAuthenticated:t,userAddress:s,account:c,deleteCircle:D}=(0,l.A)(),[I,U]=(0,n.useState)("0"),[S,L]=(0,n.useState)([]),[P,E]=(0,n.useState)(!1),[M,T]=(0,n.useState)(!1),[B,z]=(0,n.useState)([]),[F,R]=(0,n.useState)(!0),[O,K]=(0,n.useState)(null),[J,q]=(0,n.useState)(null),[W,Z]=(0,n.useState)(!0),[V,H]=(0,n.useState)(new Set),[G,$]=(0,n.useState)(null),[Y,Q]=(0,n.useState)(!1),[X,ee]=(0,n.useState)(""),[et,es]=(0,n.useState)(null),[ei,en]=(0,n.useState)(null),[er,el]=(0,n.useState)(!1),[ec,eo]=(0,n.useState)(null);(0,n.useEffect)(()=>{(()=>{if(document.getElementById("moonpay-sdk")){console.log("MoonPay SDK already loaded");return}console.log("Loading MoonPay SDK...");let e=document.createElement("script");return e.id="moonpay-sdk",e.src="https://sdk.moonpay.com/embed/moonpay-sdk.js",e.async=!0,e.onload=()=>{console.log("MoonPay SDK loaded successfully")},e.onerror=e=>{console.error("Failed to load MoonPay SDK:",e)},document.body.appendChild(e),()=>{let e=document.getElementById("moonpay-sdk");e&&document.body.contains(e)&&document.body.removeChild(e)}})()},[]);let ea=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"usdc";console.log("Buy button clicked",{currencyCode:e}),console.log("MoonPay API Key:","pk_test_gJ62JiJ4tKdlVjUsQjc8G1o20kkWMK"),console.log("MoonPay SDK available:",!!window.MoonPayWebSdk);try{if(ei&&(ei.close(),en(null)),window.MoonPayWebSdk){let t=window.MoonPayWebSdk.init({flow:"buy",environment:"sandbox",variant:"overlay",params:{apiKey:"pk_test_gJ62JiJ4tKdlVjUsQjc8G1o20kkWMK",currencyCode:e,walletAddress:s||void 0,baseCurrencyCode:"usd",baseCurrencyAmount:"50"}});en(t),t.show(),console.log("MoonPay widget opened successfully")}else console.error("MoonPay SDK not loaded, falling back to direct URL"),ed(e)}catch(t){console.error("Error initializing MoonPay widget:",t),x.oR.error("Failed to open MoonPay widget. Trying alternative method..."),ed(e)}},ed=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"usdc";console.log("Using simple MoonPay URL approach");let t=new URL("https://buy-sandbox.moonpay.com");t.searchParams.append("apiKey","pk_test_gJ62JiJ4tKdlVjUsQjc8G1o20kkWMK"),t.searchParams.append("currencyCode",e),s&&t.searchParams.append("walletAddress",s);let i=t.toString();console.log("Opening MoonPay URL:",i),window.open(i,"_blank"),x.oR.success("MoonPay checkout opened in a new tab")};(0,n.useEffect)(()=>{t?console.log("User is authenticated:",s):(console.log("User not authenticated, redirecting to home"),e.push("/"))},[t,e]),(0,n.useEffect)(()=>{(async()=>{if(s){let e=new a.x({url:"https://fullnode.testnet.sui.io:443"});U((await e.getBalance({owner:s,coinType:"0x2::sui::SUI"})).totalBalance);try{let t=await e.getAllCoins({owner:s}),i=new Map;t.data.forEach(e=>{let t=e.coinType,s=t.match(/::([^:]+)$/),n=s?s[1]:t;if(i.has(n)){let t=i.get(n),s=BigInt(t.balance)+BigInt(e.balance);i.set(n,{...t,balance:s.toString()})}else i.set(n,{coinType:e.coinType,symbol:n,balance:e.balance})});let n=Array.from(i.values());console.log("Aggregated coins by symbol:",n),L(n)}catch(e){console.error("Error fetching all coins:",e)}}})()},[s]),(0,n.useEffect)(()=>{(async()=>{Z(!0);try{let e=await m.n.forceRefreshPrice();q(e),"error"===m.n.getFetchStatus()&&x.oR.error("Unable to fetch latest SUI price. Some values may not be displayed accurately.",{duration:4e3,position:"bottom-center",icon:"⚠️",style:{border:"1px solid #F87171",padding:"16px",color:"#991B1B"}})}catch(e){console.error("Error in price fetch flow:",e),q(null)}finally{Z(!1)}})()},[]);let eu=(e,t,s)=>{var i,n,r,l,c,o,a,d,u,h,m,x,g,f,y,p,b,j,v,w,N,C,k,A,_,D,I,U;if(!(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(i=n.content)||void 0===i?void 0:i.fields))return console.warn("Invalid object data structure or missing fields",e),null;let S=e.data.content.fields;console.log("Processing circle object fields:",S);let L=null!==(l=e.data.objectId)&&void 0!==l?l:"unknown-id",P=null!==(c=S.name)&&void 0!==c?c:"",E=null!==(o=S.admin)&&void 0!==o?o:"",M=Number(null!==(a=S.current_members)&&void 0!==a?a:0),T=Number(null!==(d=S.next_payout_time)&&void 0!==d?d:0),B=!0===S.is_active||"true"===String(S.is_active).toLowerCase(),z={contributionAmount:0,contributionAmountUsd:0,securityDeposit:0,securityDepositUsd:0,cycleLength:0,cycleDay:0,maxMembers:3};s&&(console.log("Using creation event data for circle:",L),z.contributionAmount=Number(null!==(u=s.contribution_amount)&&void 0!==u?u:0)/1e9,z.contributionAmountUsd=Number(null!==(h=s.contribution_amount_usd)&&void 0!==h?h:0)/100,z.securityDepositUsd=Number(null!==(m=s.security_deposit_usd)&&void 0!==m?m:0)/100,z.cycleLength=Number(null!==(x=s.cycle_length)&&void 0!==x?x:0),z.maxMembers=Number(null!==(g=s.max_members)&&void 0!==g?g:3));let F=e.data.dynamicFields||[];for(let e of(console.log("Dynamic fields for circle:",F),F))if(e&&e.type&&"string"==typeof e.type&&e.type.includes("::CircleConfig")){console.log("Found CircleConfig field:",e),e.objectId?console.log("Found CircleConfig objectId:",e.objectId):console.log("CircleConfig dynamic field found, but no objectId property."),e.value||null===(f=e.content)||void 0===f||f.fields;let t=e.content&&"object"==typeof e.content&&"fields"in e.content?e.content.fields:null,s=e.value||t;s&&"object"==typeof s?(z.contributionAmount=Number(null!==(y=s.contribution_amount)&&void 0!==y?y:1e9*z.contributionAmount)/1e9,z.securityDeposit=Number(null!==(p=s.security_deposit)&&void 0!==p?p:1e9*z.securityDeposit)/1e9,z.contributionAmountUsd=Number(null!==(b=s.contribution_amount_usd)&&void 0!==b?b:100*z.contributionAmountUsd)/100,z.securityDepositUsd=Number(null!==(j=s.security_deposit_usd)&&void 0!==j?j:100*z.securityDepositUsd)/100,z.cycleLength=Number(null!==(v=s.cycle_length)&&void 0!==v?v:z.cycleLength),z.cycleDay=Number(null!==(w=s.cycle_day)&&void 0!==w?w:z.cycleDay),z.maxMembers=Number(null!==(N=s.max_members)&&void 0!==N?N:z.maxMembers),console.log("Found cycle_day in dynamic field value/content:",z.cycleDay)):console.log("CircleConfig dynamic field found, but no value/content fields property.")}return z.contributionAmount=Number(null!==(C=S.contribution_amount)&&void 0!==C?C:1e9*z.contributionAmount)/1e9,z.securityDeposit=Number(null!==(k=S.security_deposit)&&void 0!==k?k:1e9*z.securityDeposit)/1e9,z.contributionAmountUsd=Number(null!==(A=S.contribution_amount_usd)&&void 0!==A?A:100*z.contributionAmountUsd)/100,z.securityDepositUsd=Number(null!==(_=S.security_deposit_usd)&&void 0!==_?_:100*z.securityDepositUsd)/100,z.cycleLength=Number(null!==(D=S.cycle_length)&&void 0!==D?D:z.cycleLength),0===z.cycleDay&&void 0!==S.cycle_day&&(z.cycleDay=Number(null!==(I=S.cycle_day)&&void 0!==I?I:0),console.log("Found cycle_day in direct fields:",z.cycleDay)),z.maxMembers=Number(null!==(U=S.max_members)&&void 0!==U?U:z.maxMembers),(null===(r=e.transactionInput)||void 0===r?void 0:r.cycle_day)!==void 0&&(z.cycleDay=Number(e.transactionInput.cycle_day),console.log("Using transaction input for cycle_day:",z.cycleDay)),console.log("Final config values for circle:",L,z),{id:"string"==typeof L?L:"invalid-id",name:P,admin:E,contributionAmount:z.contributionAmount,contributionAmountUsd:z.contributionAmountUsd,securityDeposit:z.securityDeposit,securityDepositUsd:z.securityDepositUsd,cycleLength:z.cycleLength,cycleDay:z.cycleDay,maxMembers:z.maxMembers,currentMembers:M,nextPayoutTime:T,memberStatus:"active",isAdmin:E===t,isActive:B}},eh=(0,n.useCallback)(async()=>{if(console.log("fetchUserCircles starting..."),!s){console.log("No user address, skipping fetch");return}console.log("Fetching circles for user:",s),R(!0),K("");try{var e,t,i,n,r,l;let c=new a.x({url:"https://fullnode.testnet.sui.io:443"});console.log("Using package ID:",k.j);let o=await c.queryEvents({query:{MoveEventType:"".concat(k.j,"::njangi_circles::CircleCreated")},limit:100}),d=await c.queryEvents({query:{MoveEventType:"".concat(k.j,"::njangi_circles::MemberJoined")},limit:100}),u=await c.queryEvents({query:{MoveEventType:"".concat(k.j,"::njangi_circles::CircleActivated")},limit:50}),h=await c.queryEvents({query:{MoveEventType:"".concat(k.j,"::njangi_custody::CustodyWalletCreated")},limit:100}),m=new Map;for(let e of h.data)if(e.parsedJson&&"object"==typeof e.parsedJson){let t=e.parsedJson;t.circle_id&&t.wallet_id&&m.set(t.circle_id,t.wallet_id)}console.log("Circle to wallet ID mapping from events:",Object.fromEntries(m));let x=async e=>{if(e)try{for(let s of(console.log("Fetching dynamic fields for circle ".concat(e)),(await c.getDynamicFields({parentId:e})).data))if((null==s?void 0:s.name)&&"object"==typeof s.name&&"type"in s.name&&s.name.type&&s.name.type.includes("vector<u8>")&&s.type&&s.type.includes("wallet_id")&&s.objectId){var t;let e=await c.getObject({id:s.objectId,options:{showContent:!0}}),i=(null===(t=e.data)||void 0===t?void 0:t.content)&&"object"==typeof e.data.content&&"fields"in e.data.content?e.data.content.fields:null;if(null==i?void 0:i.value)return console.log("Found wallet ID in dynamic fields: ".concat(i.value)),i.value}return}catch(t){console.error("Error fetching wallet ID for circle ".concat(e,":"),t);return}},g=new Set;for(let e of u.data)if(e.parsedJson&&"object"==typeof e.parsedJson){let t=e.parsedJson;t.circle_id&&g.add(t.circle_id)}console.log("Activated circle IDs:",Array.from(g));let f=new Map;for(let e of d.data)if(e.parsedJson&&"object"==typeof e.parsedJson){let t=e.parsedJson;t.circle_id&&t.member&&(f.has(t.circle_id)||f.set(t.circle_id,new Set),f.get(t.circle_id).add(t.member))}let y=new Map,p=new Map;for(let s of o.data)if(s.parsedJson){let r=s.parsedJson;if(r.circle_id&&(y.set(r.circle_id,r),null===(e=s.id)||void 0===e?void 0:e.txDigest))try{let e=await c.getTransactionBlock({digest:s.id.txDigest,options:{showInput:!0,showEffects:!1,showEvents:!1,showObjectChanges:!1}});if((null==e?void 0:null===(n=e.transaction)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:null===(t=i.transaction)||void 0===t?void 0:t.kind)==="ProgrammableTransaction"){let t=e.transaction.data.transaction.inputs||[];if(t.length>6&&"pure"===t[6].type&&"u64"===t[6].valueType){let e=t[6].value;console.log("Found cycle_day ".concat(e," for circle ").concat(r.circle_id," from tx")),p.set(r.circle_id,{cycle_day:Number(e)})}}}catch(e){console.error("Error fetching transaction data for ".concat(s.id.txDigest,":"),e)}}let b=new Map;for(let e of o.data){let t=e.parsedJson;if((null==t?void 0:t.admin)===s)try{let e=await c.getObject({id:t.circle_id,options:{showType:!0,showOwner:!0,showContent:!0,showDisplay:!1,showStorageRebate:!1,showPreviousTransaction:!1,showBcs:!1}});if(!e.data||e.error){console.log("Circle ".concat(t.circle_id," no longer exists, skipping..."));continue}let i=await c.getDynamicFields({parentId:t.circle_id});console.log("Dynamic fields for circle ".concat(t.circle_id,":"),i.data);let n=p.get(t.circle_id),l={...e,data:{...e.data,dynamicFields:i.data},transactionInput:n},o=eu(l,s,t);if(o){let e=f.has(t.circle_id)?f.get(t.circle_id).size:1,s=g.has(t.circle_id),i={...o,id:null!==(r=null==o?void 0:o.id)&&void 0!==r?r:"",name:"string"==typeof(null==o?void 0:o.name)?o.name:"",admin:"string"==typeof(null==o?void 0:o.admin)?o.admin:""},n=m.get(t.circle_id);!n&&(n=await x(t.circle_id))&&m.set(t.circle_id,n),b.set(t.circle_id,{...i,currentMembers:e,isActive:s,walletId:n||void 0}),console.log("Added admin circle:",t.circle_id,"with members:",e,"wallet ID:",n||"none")}}catch(e){console.error("Error fetching circle details for ".concat(t.circle_id,":"),e)}}for(let e of d.data){let t=e.parsedJson;if((null==t?void 0:t.member)===s&&!b.has(t.circle_id))try{let e=await c.getObject({id:t.circle_id,options:{showContent:!0}}),i=y.get(t.circle_id),n=await c.getDynamicFields({parentId:t.circle_id}),r=p.get(t.circle_id),o={...e,data:{...e.data,dynamicFields:n.data},transactionInput:r},a=eu(o,s,i);if(a){let e=f.has(t.circle_id)?f.get(t.circle_id).size:1,s=g.has(t.circle_id),i={...a,id:null!==(l=null==a?void 0:a.id)&&void 0!==l?l:"",name:"string"==typeof(null==a?void 0:a.name)?a.name:"",admin:"string"==typeof(null==a?void 0:a.admin)?a.admin:""},n=m.get(t.circle_id);!n&&(n=await x(t.circle_id))&&m.set(t.circle_id,n),b.set(t.circle_id,{...i,currentMembers:e,isActive:s,walletId:n||void 0}),console.log("Added member circle:",t.circle_id,"with members:",e,"wallet ID:",n||"none")}}catch(e){console.error("Error fetching circle details for ".concat(t.circle_id,":"),e)}}z(Array.from(b.values()));let j=Array.from(b.values()).filter(e=>e.isAdmin).map(e=>e.id);console.log("Storing admin circle IDs in localStorage:",j),localStorage.setItem("adminCircles",JSON.stringify(j))}catch(e){console.error("Error fetching circles:",e),K("An error occurred while fetching circles. Please try again later.")}finally{R(!1)}},[s]);(0,n.useEffect)(()=>{eh()},[s,eh]),(0,n.useEffect)(()=>{(async()=>{if(s&&0!==B.length)try{let e=new Set;for(let t of B.filter(e=>e.isAdmin))try{t.currentMembers<=1&&e.add(t.id)}catch(e){console.error("Error checking if circle ".concat(t.id," can be deleted:"),e)}H(e)}catch(e){console.error("Error checking deleteable circles:",e)}})()},[B,s]),(0,n.useEffect)(()=>{(async()=>{if(t&&c){console.log("Using zkLogin authentication, skipping wallet check");return}window.suiWallet||window.sui||window.suix||window.ethos||window.suiet||window.martian||(console.log("No wallet extension detected"),t||x.oR.error("No SUI wallet extension detected. Please install a SUI wallet or use zkLogin authentication."))})()},[t,c]);let em=async e=>{let t=async()=>{try{console.log("Deleting circle with zkLogin:",e),$(e);let t=B.find(t=>t.id===e),s=null==t?void 0:t.walletId;console.log("Circle to delete:",t),console.log("Using wallet ID:",s);let i=await D(e,s);i.success?(console.log("Delete successful with digest:",i.digest),z(t=>t.filter(t=>t.id!==e)),x.oR.success("Circle has been deleted.")):"WALLET_HAS_BALANCE"===i.errorType?(console.log("Circle has funds, cannot delete:",i.error),eo({title:"Cannot Delete Circle",message:"This circle cannot be deleted because it still has funds in its wallet. Please withdraw all funds first, then try deleting the circle again.",confirmText:"OK",confirmButtonVariant:"warning",onConfirm:()=>el(!1)}),el(!0)):x.oR.error(i.error||"Failed to delete circle"),$("")}catch(e){console.error("Error deleting circle:",e),$(""),eo({title:"Error Deleting Circle",message:e instanceof Error?e.message:"Failed to delete circle",confirmText:"OK",confirmButtonVariant:"danger",onConfirm:()=>el(!1)}),el(!0)}};try{let s=B.find(t=>t.id===e);if(!(null==s?void 0:s.walletId)){el(!0),eo({title:"Delete Circle",message:"Are you sure you want to delete this circle? This action cannot be undone.",confirmText:"Delete",confirmButtonVariant:"danger",onConfirm:t});return}V.has(e)?(el(!0),eo({title:"Delete Circle",message:"Are you sure you want to delete this circle? This action cannot be undone.",confirmText:"Delete",confirmButtonVariant:"danger",onConfirm:t})):(el(!0),eo({title:"Delete Circle",message:"Are you sure you want to delete this circle? This action cannot be undone. Note that you'll need to withdraw any funds before it can be deleted.",confirmText:"Delete",confirmButtonVariant:"danger",onConfirm:t}))}catch(e){console.error("Error checking circle status:",e),el(!0),eo({title:"Delete Circle",message:"Are you sure you want to delete this circle? This action cannot be undone.",confirmText:"Delete",confirmButtonVariant:"danger",onConfirm:t})}},ex=async e=>{console.log("deleteCircle function called with circleId:",e);let s=async()=>{console.log("Wallet detection results:",{suiWallet:!!window.suiWallet,sui:!!window.sui,suix:!!window.suix,ethos:!!window.ethos,suiet:!!window.suiet,martian:!!window.martian});let t=null;if(window.suiWallet?t=window.suiWallet:window.sui?t=window.sui:window.suix?t=window.suix:window.ethos?t=window.ethos:window.suiet?t=window.suiet:window.martian&&(t=window.martian),!t){console.log("No compatible SUI wallet found"),x.oR.error("No wallet detected. Please install a SUI wallet extension.");return}console.log("Available wallet methods:",Object.keys(t));let s=k.j;console.log("Using packageId:",s),$(e),console.log("Set isDeleting state to:",e);try{let i="function"==typeof t.signAndExecuteTransactionBlock,n="function"==typeof t.signTransactionBlock,r="function"==typeof t.signAndExecuteTransaction,l="function"==typeof t.constructTransaction,c="function"==typeof t.signAndExecuteTransaction;console.log("Wallet capabilities:",{signAndExecuteTransactionBlock:i,signTransactionBlock:n,signAndExecuteTransaction:r,constructTransaction:l,signAndExecuteTransactionV2:c});let o=null;if(i&&t.signAndExecuteTransactionBlock){console.log("Using signAndExecuteTransactionBlock API");let i={transactionBlock:{transactions:[{kind:"MoveCall",target:"".concat(s,"::njangi_circles::delete_circle"),arguments:[{kind:"Input",index:0,type:"object",value:e}]}]},options:{showEffects:!0,showEvents:!0}};console.log("Transaction block created:",i),o=await t.signAndExecuteTransactionBlock(i)}else if(i&&t.signAndExecuteTransactionBlock){console.log("Using alternative signAndExecuteTransactionBlock format");let i={transactionBlock:{moveCall:{packageObjectId:s,module:"njangi_circle",function:"delete_circle",typeArguments:[],arguments:[e]}},options:{showEffects:!0,showEvents:!0}};console.log("Transaction block created (alternative format):",i),o=await t.signAndExecuteTransactionBlock(i)}else if(l&&r&&t.constructTransaction&&t.signAndExecuteTransaction){console.log("Using legacy transaction flow");let i=t.constructTransaction({kind:"moveCall",data:{packageObjectId:s,module:"njangi_circle",function:"delete_circle",typeArguments:[],arguments:[e],gasBudget:1e7}});console.log("Transaction constructed:",i),o=await t.signAndExecuteTransaction({transaction:i})}else{console.error("No compatible wallet API methods found"),x.oR.error("Your wallet does not support the required transaction methods."),$(null);return}console.log("Transaction execution result:",o),o&&(x.oR.success("Circle deleted successfully"),z(t=>t.filter(t=>t.id!==e)),H(t=>{let s=new Set(t);return s.delete(e),s}))}catch(e){console.error("Error deleting circle with wallet:",e),e instanceof Error?e.message.includes("ECircleHasActiveMembers")?x.oR.error("Cannot delete: Circle has active members"):e.message.includes("ECircleHasContributions")?x.oR.error("Cannot delete: Circle has received contributions"):x.oR.error("Error deleting circle: "+e.message):x.oR.error("Error deleting circle")}finally{$(null)}};if(t&&c)console.log("Using zkLogin authentication for deletion"),em(e);else{let t=B.find(t=>t.id===e);eo({title:"Delete Circle: ".concat((null==t?void 0:t.name)||"Unknown"),message:"Are you absolutely sure you want to delete this circle? This action cannot be undone.",onConfirm:s,confirmText:"Delete Circle",confirmButtonVariant:"danger"}),el(!0)}},eg=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"address";if(e)try{await navigator.clipboard.writeText(e),"address"===t?(T(!0),setTimeout(()=>T(!1),2e3)):"circleId"===t&&(es(e),x.oR.success("Circle ID copied to clipboard!"),setTimeout(()=>es(null),2e3))}catch(e){console.error("Failed to copy ".concat(t,":"),e),x.oR.error("Failed to copy ".concat("address"===t?"address":"circle ID"))}},ef=async e=>{try{let t="".concat(window.location.origin,"/circle/").concat(e,"/join");await navigator.clipboard.writeText(t),x.oR.success("Invite link copied to clipboard!")}catch(e){console.error("Failed to copy share link:",e),x.oR.error("Failed to copy invite link")}},ey=(e,t)=>{console.log("[formatCycleInfo] Received:",{cycleLength:e,cycleDay:t});let s="",i="",n="number"==typeof e?e:0,r="number"==typeof t?t:0,l=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];switch((0===n||3===n)&&r>6&&(r=0),(1===n||2===n)&&(r<=0||r>28)&&(r=1),n){case 0:s="Weekly",i=l[r]||"Monday";break;case 3:s="Bi-Weekly",i=l[r]||"Monday";break;case 1:s="Monthly",i=ep(r);break;case 2:s="Quarterly",i=ep(r);break;default:s="Unknown",i="Day ".concat(0===r?1:r)}return"".concat(s," (").concat(i,")")},ep=e=>{let t=e%100;if(t>=11&&t<=13)return"".concat(e,"th day");let s=e%10,i=s>=1&&s<=3?["th","st","nd","rd"][s]:"th";return"".concat(e).concat(i," day")},eb=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:t?void 0:"UTC"}):"Not set"},ej=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),ev=e=>{let{usd:t,sui:s,className:n=""}=e,r=null===J;console.log("CurrencyDisplay inputs:",{usd:t,sui:s,suiPrice:J,isPriceUnavailable:r}),(0===t||0===s)&&console.log("Zero values detected in CurrencyDisplay:",{usd:t,sui:s}),(void 0===t||isNaN(t))&&(void 0===s||isNaN(s))&&(console.log("CurrencyDisplay: both usd and sui values are invalid, defaulting to 0"),t=0,s=0);let l=null,c=null;if(void 0===t||isNaN(t)?void 0===s||isNaN(s)?console.log("CurrencyDisplay: using default values:",{sui:l=0,usd:c=0}):console.log("CurrencyDisplay: using SUI value to calculate USD:",{sui:l=s,usd:c=null!==J?s*J:null,suiPrice:J}):console.log("CurrencyDisplay: using USD value to calculate SUI:",{usd:c=t,sui:l=null!==J&&J>0?t/J:null,suiPrice:J}),0===c&&0===l)return(0,i.jsx)("span",{className:"".concat(n),children:r?"Data unavailable":"$0.00 (0 SUI)"});let o=null!==l?l>=1e3?l.toLocaleString(void 0,{maximumFractionDigits:0}):l>=100?l.toFixed(1):l.toFixed(2):"—";return(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsxs)("span",{className:"cursor-help ".concat(n," flex items-center"),children:[null!==c?ej(c):"$—.—",(0,i.jsxs)("span",{className:"text-gray-500 mr-1",children:["(",o," SUI)"]}),W&&(0,i.jsx)(g.A,{size:14,className:"animate-spin ml-1 text-blue-500"}),r&&!W&&(0,i.jsx)(f.A,{size:14,className:"ml-1 text-amber-500"})]})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-900 text-white px-3 py-2 rounded text-sm",sideOffset:5,children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("p",{children:"SUI Conversion Rate:"}),null!==J?(0,i.jsxs)("p",{children:["1 SUI = ",ej(J)]}):(0,i.jsx)("p",{className:"text-amber-400",children:"SUI price unavailable"}),(0,i.jsx)("p",{className:"text-xs text-gray-400",children:W?"Loading latest price data...":r?"Unable to fetch price data":"Using latest price from CoinGecko"})]}),(0,i.jsx)(u.i3,{className:"fill-gray-900"})]})})]})})},ew=e=>e?"".concat(e.slice(0,10),"...").concat(e.slice(-6)):"";return t&&c?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[M&&(0,i.jsxs)("div",{className:"fixed top-4 right-4 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg transition-opacity duration-200 flex items-center space-x-2 z-50",children:[(0,i.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Address copied to clipboard!"})]}),(0,i.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,i.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,i.jsx)("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("div",{className:"h-16 w-16 rounded-full overflow-hidden bg-gray-200 flex-shrink-0 relative",children:c.picture?(0,i.jsx)(o(),{src:c.picture,alt:"Profile",width:64,height:64,className:"object-cover",priority:!0,onError:()=>{console.error("Error loading Google profile picture")}}):(0,i.jsx)(o(),{src:"https://api.dicebear.com/7.x/micah/svg?seed=".concat(c.sub),alt:"Profile",width:64,height:64,className:"object-cover",priority:!0,unoptimized:!0})}),(0,i.jsx)("div",{className:"flex-grow",children:(0,i.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Welcome Back",c.name?", ".concat(c.name):"","!"]})})]})}),(0,i.jsx)("div",{className:"border-t border-gray-200",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 divide-x divide-gray-200",children:[(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Wallet Address"}),(0,i.jsx)("button",{onClick:()=>eg(s),className:"text-blue-600 hover:text-blue-700 p-1 rounded-full hover:bg-blue-50 transition-colors duration-200",title:"Copy address",children:(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]}),(0,i.jsxs)("div",{className:"group relative",children:[(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-900 break-all font-mono",children:P?s:s?"".concat(s.slice(0,6),"...").concat(s.slice(-6)):""}),(0,i.jsx)("button",{onClick:()=>E(!P),className:"mt-1 text-xs text-blue-600 hover:text-blue-700",children:P?"Show less":"Show more"})]})]}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Balance"}),(0,i.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-blue-600",children:[Number(I)/1e9," SUI"]}),S.length>1&&(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"All Tokens"}),(0,i.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto pr-2",children:S.map((e,t)=>(0,i.jsxs)("div",{className:"flex justify-between items-center text-sm py-1",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(_,{symbol:e.symbol}),(0,i.jsx)("span",{className:"font-medium",children:e.symbol})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-gray-700 mr-2",children:"usdc"===e.symbol.toLowerCase()?(Number(e.balance)/1e6).toFixed(6):Number(e.balance)/1e9}),"usdc"===e.symbol.toLowerCase()&&(0,i.jsx)("button",{onClick:()=>{console.log("Buy USDC button clicked"),ea("usdc")},className:"text-xs bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded transition-colors",title:"Buy USDC with MoonPay",children:"Buy"})]})]},t))})]})]})]})})]}),(0,i.jsx)("div",{className:"mt-8",children:(0,i.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"My Njangi Circles"}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsxs)("button",{type:"button",onClick:()=>Q(!0),className:"inline-flex items-center px-4 py-2 border border-blue-600 text-sm font-medium rounded-md shadow-sm text-blue-600 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[(0,i.jsx)(y.A,{className:"w-5 h-5 mr-2"}),"Join Circle"]}),(0,i.jsxs)("button",{type:"button",onClick:()=>e.push("/create-circle"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Create New Circle"]})]})]}),F?(0,i.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,i.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):O?(0,i.jsxs)("div",{className:"bg-red-50 rounded-lg p-8 text-center",children:[(0,i.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,i.jsx)("h3",{className:"mt-2 text-sm font-medium text-red-900",children:O}),(0,i.jsx)("p",{className:"mt-1 text-sm text-red-500",children:"Please try again later."}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)("button",{type:"button",onClick:()=>eh(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200",children:"Try Again"})})]}):B.length>0?(0,i.jsx)("div",{children:(0,i.jsxs)(d.oz.Group,{children:[(0,i.jsxs)(d.oz.List,{className:"flex space-x-1 rounded-xl bg-blue-50 p-1 mb-6",children:[(0,i.jsxs)(d.oz,{className:e=>{let{selected:t}=e;return"w-full rounded-lg py-2.5 text-sm font-medium leading-5 transition-colors duration-200\n                           ".concat(t?"bg-white text-blue-700 shadow":"text-blue-600 hover:bg-white/[0.12] hover:text-blue-700")},children:["All Circles (",B.length,")"]}),(0,i.jsxs)(d.oz,{className:e=>{let{selected:t}=e;return"w-full rounded-lg py-2.5 text-sm font-medium leading-5 transition-colors duration-200\n                           ".concat(t?"bg-white text-blue-700 shadow":"text-blue-600 hover:bg-white/[0.12] hover:text-blue-700")},children:["Administering (",B.filter(e=>e.isAdmin).length,")"]}),(0,i.jsxs)(d.oz,{className:e=>{let{selected:t}=e;return"w-full rounded-lg py-2.5 text-sm font-medium leading-5 transition-colors duration-200\n                           ".concat(t?"bg-white text-blue-700 shadow":"text-blue-600 hover:bg-white/[0.12] hover:text-blue-700")},children:["Member Only (",B.filter(e=>!e.isAdmin).length,")"]})]}),(0,i.jsxs)(d.oz.Panels,{children:[(0,i.jsx)(d.oz.Panel,{children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(t=>(0,i.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,i.jsxs)("div",{className:"p-5 border-b border-gray-100",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:t.name}),(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat(t.isAdmin?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:t.isAdmin?"Admin":"Member"}),(0,i.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat(t.isActive?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:t.isActive?"Active":"Inactive"})]})]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[(0,i.jsx)("svg",{className:"mr-1.5 h-4 w-4 flex-shrink-0 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.currentMembers," / ",t.maxMembers," members"]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center space-x-1 text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["ID: ",ew(t.id)]}),(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>eg(t.id,"circleId"),className:"text-gray-400 hover:text-blue-600 p-1 rounded-full hover:bg-blue-50 transition-colors duration-200 ".concat(et===t.id?"text-green-500":""),"aria-label":"Copy Circle ID",children:(0,i.jsx)(p.A,{size:14})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:[et===t.id?"Copied!":"Copy Circle ID",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),t.isAdmin&&(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>ef(t.id),className:"text-gray-400 hover:text-blue-600 p-1 rounded-full hover:bg-blue-50 transition-colors duration-200","aria-label":"Copy Invite Link",children:(0,i.jsx)(b.A,{size:14})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Copy Invite Link",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})})]})]}),(0,i.jsx)("div",{className:"px-5 py-3 bg-gray-50 text-sm",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Contribution"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(0,i.jsx)(ev,{usd:t.contributionAmountUsd})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Cycle"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:ey(t.cycleLength,t.cycleDay)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Security Deposit"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(0,i.jsx)(ev,{usd:t.securityDepositUsd})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Next Payout"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:t.isActive?eb(t.nextPayoutTime):"Activate Circle to Start"})]})]})}),(0,i.jsxs)("div",{className:"p-4 flex justify-between bg-white border-t border-gray-100",children:[(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id)),className:"text-blue-600 hover:text-blue-800 font-medium p-2 hover:bg-blue-50 rounded-full transition-colors","aria-label":"View Details",children:(0,i.jsx)(j.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["View Details",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[t.isAdmin&&(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id,"/manage")),className:"text-purple-600 hover:text-purple-800 font-medium p-2 hover:bg-purple-50 rounded-full transition-colors","aria-label":"Manage Circle",children:(0,i.jsx)(v.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Manage",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),t.isAdmin&&V.has(t.id)&&(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>{console.log("Delete button clicked for circle:",t.id);try{ex(t.id)}catch(e){console.error("Error in delete button click handler:",e),x.oR.error("Error processing delete request")}},disabled:G===t.id,className:"text-red-600 hover:text-red-800 font-medium p-2 hover:bg-red-50 rounded-full transition-colors ".concat(G===t.id?"opacity-50 cursor-not-allowed":""),"aria-label":"Delete Circle",children:(0,i.jsx)(w.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:[G===t.id?"Deleting...":"Delete",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id,"/contribute")),className:"text-green-600 hover:text-green-800 font-medium p-2 hover:bg-green-50 rounded-full transition-colors","aria-label":"Contribute",children:(0,i.jsx)(N.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Contribute",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})})]})]})]},t.id))})}),(0,i.jsx)(d.oz.Panel,{children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.filter(e=>e.isAdmin).map(t=>(0,i.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,i.jsxs)("div",{className:"p-5 border-b border-gray-100",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:t.name}),(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-purple-100 text-purple-800",children:"Admin"}),(0,i.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat(t.isActive?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:t.isActive?"Active":"Inactive"})]})]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[(0,i.jsx)("svg",{className:"mr-1.5 h-4 w-4 flex-shrink-0 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.currentMembers," / ",t.maxMembers," members"]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center space-x-1 text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["ID: ",ew(t.id)]}),(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>eg(t.id,"circleId"),className:"text-gray-400 hover:text-blue-600 p-1 rounded-full hover:bg-blue-50 transition-colors duration-200 ".concat(et===t.id?"text-green-500":""),"aria-label":"Copy Circle ID",children:(0,i.jsx)(p.A,{size:14})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:[et===t.id?"Copied!":"Copy Circle ID",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>ef(t.id),className:"text-gray-400 hover:text-blue-600 p-1 rounded-full hover:bg-blue-50 transition-colors duration-200","aria-label":"Copy Invite Link",children:(0,i.jsx)(b.A,{size:14})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Copy Invite Link",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})})]})]}),(0,i.jsx)("div",{className:"px-5 py-3 bg-gray-50 text-sm",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Contribution"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(0,i.jsx)(ev,{usd:t.contributionAmountUsd})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Cycle"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:ey(t.cycleLength,t.cycleDay)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Security Deposit"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(0,i.jsx)(ev,{usd:t.securityDepositUsd})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Next Payout"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:t.isActive?eb(t.nextPayoutTime):"Activate Circle to Start"})]})]})}),(0,i.jsxs)("div",{className:"p-4 flex justify-between bg-white border-t border-gray-100",children:[(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id)),className:"text-blue-600 hover:text-blue-800 font-medium p-2 hover:bg-blue-50 rounded-full transition-colors","aria-label":"View Details",children:(0,i.jsx)(j.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["View Details",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[t.isAdmin&&(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id,"/manage")),className:"text-purple-600 hover:text-purple-800 font-medium p-2 hover:bg-purple-50 rounded-full transition-colors","aria-label":"Manage Circle",children:(0,i.jsx)(v.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Manage",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),t.isAdmin&&V.has(t.id)&&(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>{console.log("Delete button clicked for circle:",t.id);try{ex(t.id)}catch(e){console.error("Error in delete button click handler:",e),x.oR.error("Error processing delete request")}},disabled:G===t.id,className:"text-red-600 hover:text-red-800 font-medium p-2 hover:bg-red-50 rounded-full transition-colors ".concat(G===t.id?"opacity-50 cursor-not-allowed":""),"aria-label":"Delete Circle",children:(0,i.jsx)(w.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:[G===t.id?"Deleting...":"Delete",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id,"/contribute")),className:"text-green-600 hover:text-green-800 font-medium p-2 hover:bg-green-50 rounded-full transition-colors","aria-label":"Contribute",children:(0,i.jsx)(N.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Contribute",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})})]})]})]},t.id))})}),(0,i.jsx)(d.oz.Panel,{children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.filter(e=>!e.isAdmin).map(t=>(0,i.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,i.jsxs)("div",{className:"p-5 border-b border-gray-100",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:t.name}),(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-blue-100 text-blue-800",children:"Member"}),(0,i.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat(t.isActive?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:t.isActive?"Active":"Inactive"})]})]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[(0,i.jsx)("svg",{className:"mr-1.5 h-4 w-4 flex-shrink-0 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.currentMembers," / ",t.maxMembers," members"]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center space-x-1 text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["ID: ",ew(t.id)]}),(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>eg(t.id,"circleId"),className:"text-gray-400 hover:text-blue-600 p-1 rounded-full hover:bg-blue-50 transition-colors duration-200 ".concat(et===t.id?"text-green-500":""),"aria-label":"Copy Circle ID",children:(0,i.jsx)(p.A,{size:14})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:[et===t.id?"Copied!":"Copy Circle ID",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})})]})]}),(0,i.jsx)("div",{className:"px-5 py-3 bg-gray-50 text-sm",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Contribution"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(0,i.jsx)(ev,{usd:t.contributionAmountUsd})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Cycle"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:ey(t.cycleLength,t.cycleDay)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Security Deposit"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(0,i.jsx)(ev,{usd:t.securityDepositUsd})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-500",children:"Next Payout"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:t.isActive?eb(t.nextPayoutTime):"Activate Circle to Start"})]})]})}),(0,i.jsxs)("div",{className:"p-4 flex justify-between bg-white border-t border-gray-100",children:[(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id)),className:"text-blue-600 hover:text-blue-800 font-medium p-2 hover:bg-blue-50 rounded-full transition-colors","aria-label":"View Details",children:(0,i.jsx)(j.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["View Details",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[t.isAdmin&&(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id,"/manage")),className:"text-purple-600 hover:text-purple-800 font-medium p-2 hover:bg-purple-50 rounded-full transition-colors","aria-label":"Manage Circle",children:(0,i.jsx)(v.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Manage",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),t.isAdmin&&V.has(t.id)&&(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>{console.log("Delete button clicked for circle:",t.id);try{ex(t.id)}catch(e){console.error("Error in delete button click handler:",e),x.oR.error("Error processing delete request")}},disabled:G===t.id,className:"text-red-600 hover:text-red-800 font-medium p-2 hover:bg-red-50 rounded-full transition-colors ".concat(G===t.id?"opacity-50 cursor-not-allowed":""),"aria-label":"Delete Circle",children:(0,i.jsx)(w.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:[G===t.id?"Deleting...":"Delete",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})}),(0,i.jsx)(u.Kq,{children:(0,i.jsxs)(u.bL,{children:[(0,i.jsx)(u.l9,{asChild:!0,children:(0,i.jsx)("button",{onClick:()=>e.push("/circle/".concat(t.id,"/contribute")),className:"text-green-600 hover:text-green-800 font-medium p-2 hover:bg-green-50 rounded-full transition-colors","aria-label":"Contribute",children:(0,i.jsx)(N.A,{size:18})})}),(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{className:"bg-gray-800 text-white px-2 py-1 rounded text-xs",sideOffset:5,children:["Contribute",(0,i.jsx)(u.i3,{className:"fill-gray-800"})]})})]})})]})]})]},t.id))})})]})]})}):(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[(0,i.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,i.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No circles yet"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new circle or joining an existing one."}),(0,i.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>Q(!0),className:"inline-flex items-center justify-center p-3 rounded-full text-blue-600 bg-white border border-blue-600 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",title:"Join Existing Circle",children:(0,i.jsx)(y.A,{className:"w-6 h-6"})}),(0,i.jsx)("button",{type:"button",onClick:()=>e.push("/create-circle"),className:"inline-flex items-center justify-center p-3 rounded-full text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",title:"Create New Circle",children:(0,i.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})]})]})]})})]})}),(0,i.jsx)(h.bL,{open:Y,onOpenChange:Q,children:(0,i.jsxs)(h.ZL,{children:[(0,i.jsx)(h.hJ,{className:"fixed inset-0 bg-black/30"}),(0,i.jsxs)(h.UC,{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-lg p-6 w-full max-w-md focus:outline-none",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)(h.hE,{className:"text-lg font-medium text-gray-900",children:"Join a Circle"}),(0,i.jsx)(h.bm,{className:"text-gray-400 hover:text-gray-500",children:(0,i.jsx)(C.A,{className:"w-5 h-5"})})]}),(0,i.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!X.trim()){x.oR.error("Please enter a valid circle ID");return}let s=X.trim();if(s.includes("/circle/")){let e=s.match(/\/circle\/([^\/]+)/);e&&e[1]&&(s=e[1])}e.push("/circle/".concat(s,"/join")),ee(""),Q(!1)},children:[(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("label",{htmlFor:"circleId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Circle ID or Invite Link"}),(0,i.jsx)("input",{type:"text",id:"circleId",value:X,onChange:e=>ee(e.target.value),placeholder:"0x123... or full invite link",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Paste the circle ID or the complete invite link to join"})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>Q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Join Circle"})]})]})]})]})}),ec&&(0,i.jsx)(A.A,{isOpen:er,onClose:()=>el(!1),onConfirm:ec.onConfirm,title:ec.title,message:ec.message,confirmText:ec.confirmText,confirmButtonVariant:ec.confirmButtonVariant})]}):null}},6857:(e,t,s)=>{"use strict";s.d(t,{j:()=>i});let i="0xd530bfd7511ac2d343646a8ca4e2e14ffb89e1ec69a38ff8fb99c415706d6154"},2876:(e,t,s)=>{"use strict";s.d(t,{n:()=>n});class i{static getInstance(){return i.instance||(i.instance=new i),i.instance}loadCachedPrice(){{let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let{price:t,timestamp:s}=JSON.parse(e);this.cachedPrice=t,this.lastFetchTime=s}catch(e){console.error("Error parsing cached price data:",e)}}}saveCachedPrice(e,t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify({price:e,timestamp:t}))}getFetchStatus(){return this.fetchStatus}isPriceAvailable(){return null!==this.cachedPrice}getCachedPrice(){return this.cachedPrice}async forceRefreshPrice(){return this.lastFetchTime=0,this.getSUIPrice()}async fetchBinancePrice(){try{let e=await fetch(this.BINANCE_API_URL);if(!e.ok)throw Error("Failed to fetch from Binance");let t=await e.json();if(t&&t.price)return parseFloat(t.price);return null}catch(e){return console.error("Error fetching from Binance:",e),null}}async fetchJupiterPrice(){try{let e=await fetch(this.BACKUP_API_URL);if(!e.ok)throw Error("Failed to fetch from Jupiter");let t=await e.json();if(t&&t.data&&t.data.SUI)return t.data.SUI.price;return null}catch(e){return console.error("Error fetching from Jupiter:",e),null}}async getSUIPrice(){let e=Date.now();if(null!==this.cachedPrice&&e-this.lastFetchTime<this.CACHE_DURATION)return console.log("Using cached SUI price: $".concat(this.cachedPrice," (").concat(Math.floor((e-this.lastFetchTime)/1e3),"s old)")),this.cachedPrice;this.fetchStatus="loading";try{let t=await fetch(this.PRIMARY_API_URL);if(!t.ok)throw Error("Failed to fetch SUI price from primary API");let s=await t.json();return this.cachedPrice=s.sui.usd,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e),this.fetchStatus="success",console.log("Successfully fetched fresh SUI price: $".concat(this.cachedPrice)),this.cachedPrice}catch(i){console.error("Error fetching SUI price from primary API:",i);let t=await this.fetchJupiterPrice();if(null!==t)return this.cachedPrice=t,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e),this.fetchStatus="success",console.log("Successfully fetched SUI price from Jupiter: $".concat(this.cachedPrice)),this.cachedPrice;let s=await this.fetchBinancePrice();if(null!==s)return this.cachedPrice=s,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e),this.fetchStatus="success",console.log("Successfully fetched SUI price from Binance: $".concat(this.cachedPrice)),this.cachedPrice;if(this.fetchStatus="error",null!==this.cachedPrice&&e-this.lastFetchTime<216e5)return console.warn("Using stale cached price: $".concat(this.cachedPrice)),this.cachedPrice;return(null===this.cachedPrice||e-this.lastFetchTime>216e5)&&(console.warn("Using fallback price: $".concat(this.FALLBACK_PRICE)),this.cachedPrice=this.FALLBACK_PRICE,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e)),this.cachedPrice}}constructor(){this.lastFetchTime=0,this.cachedPrice=null,this.CACHE_DURATION=3e5,this.PRIMARY_API_URL="https://api.coingecko.com/api/v3/simple/price?ids=sui&vs_currencies=usd",this.BACKUP_API_URL="https://price.jup.ag/v4/price?ids=SUI",this.BINANCE_API_URL="https://api.binance.com/api/v3/ticker/price?symbol=SUIUSDT",this.STORAGE_KEY="sui_cached_price",this.FALLBACK_PRICE=3.71,this.fetchStatus="idle",this.loadCachedPrice()}}let n=i.getInstance()}},e=>{var t=t=>e(e.s=t);e.O(0,[895,912,454,578,636,593,792],()=>t(7100)),_N_E=e.O()}]);