(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{436:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-circle",function(){return s(7262)}])},7262:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(4848),a=s(6540),l=s(6715),i=s(3481),n=s(803),c=s(9014),o=s(854),d=s(3881),u=s(2876);let m={weekly:0,"bi-weekly":3,monthly:1,quarterly:2},h={rotational:0,"smart-goal":1,auction:2},x={amount:0,date:1},g={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6},b=e=>{let t=[];return e.name||t.push("Circle name is required"),e.contributionAmount<=0&&t.push("Contribution amount must be greater than 0"),e.securityDeposit<e.contributionAmount/2&&t.push("Security deposit must be at least 50% of contribution amount"),(e.numberOfMembers<3||e.numberOfMembers>20)&&t.push("Number of members must be between ".concat(3," and ").concat(20)),"smart-goal"===e.cycleType&&e.smartGoal&&("amount"===e.smartGoal.goalType&&(!e.smartGoal.targetAmount||e.smartGoal.targetAmount<=0)&&t.push("Target amount must be greater than 0"),"date"!==e.smartGoal.goalType||e.smartGoal.targetDate||t.push("Target date is required")),t},p=(e,t)=>{var s,r,a,l;let i=m[e.cycleLength],n="string"==typeof e.cycleDay?g[e.cycleDay]:e.cycleDay,c=h[e.cycleType],o=e.smartGoal?{some:x[e.smartGoal.goalType]}:{none:null},d=(null===(s=e.smartGoal)||void 0===s?void 0:s.goalType)==="amount"&&e.smartGoal.targetAmount?{some:BigInt(Math.round(1e9*e.smartGoal.targetAmount))}:{none:null},u=Math.floor(100*e.contributionAmountUSD),b=Math.floor(100*e.securityDepositUSD),p=(null===(r=e.smartGoal)||void 0===r?void 0:r.targetAmountUSD)?Math.floor(100*e.smartGoal.targetAmountUSD):0,y=(null===(a=e.smartGoal)||void 0===a?void 0:a.goalType)==="date"&&e.smartGoal.targetDate?{some:BigInt(Math.round(new Date(e.smartGoal.targetDate).getTime()/1e3))}:{none:null},f=BigInt(Math.round(e.contributionAmountUSD/t*1e9)),j=BigInt(Math.round(e.securityDepositUSD/t*1e9)),v=[e.penaltyRules.latePayment,e.penaltyRules.missedMeeting];return{name:e.name,contribution_amount:f,contribution_amount_usd:u,security_deposit:j,security_deposit_usd:b,cycle_length:i,cycle_day:n,circle_type:c,max_members:e.numberOfMembers,rotation_style:"auction-based"===e.rotationStyle?1:0,penalty_rules:v,goal_type:o,target_amount:d,target_amount_usd:p,target_date:y,verification_required:(null===(l=e.smartGoal)||void 0===l?void 0:l.verificationRequired)||!1}};function y(){var e,t,s,m,h,x,g,y;let w=(0,l.useRouter)(),{isAuthenticated:U,account:D}=(0,i.A)(),[L,P]=(0,a.useState)(0),[I,A]=(0,a.useState)(!1),[M,T]=(0,a.useState)(!1),[_,F]=(0,a.useState)({name:"",contributionAmount:0,contributionAmountUSD:0,cycleLength:"monthly",cycleDay:1,cycleType:"rotational",rotationStyle:"fixed",numberOfMembers:3,securityDeposit:0,securityDepositUSD:0,penaltyRules:{latePayment:!1,missedMeeting:!1}}),[G,R]=(0,a.useState)(null),[E,B]=(0,a.useState)(!1),[q,O]=(0,a.useState)([]),[z,V]=(0,a.useState)(""),[W,K]=(0,a.useState)("email"),[H,$]=(0,a.useState)(""),[J,Z]=(0,a.useState)(!1),[Y,Q]=(0,a.useState)([]),[X,ee]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=async()=>{let e=await u.n.getSUIPrice();R(e),B(null!==e)};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]);let et=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?20*Math.round(e/20):e},es=e=>E&&null!==G?Number((e/G).toFixed(6)):0,er=e=>{let{sui:t,usd:s,className:a=""}=e;return(0,r.jsx)(d.Kq,{children:(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsxs)("span",{className:"cursor-help ".concat(a),children:[N(s)," ",E?(0,r.jsxs)("span",{className:"text-gray-500",children:["(",t.toFixed(2)," SUI)"]}):(0,r.jsx)("span",{className:"text-yellow-500",children:"(SUI price unavailable)"})]})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-3 py-2 rounded text-sm",sideOffset:5,children:[(0,r.jsx)("div",{className:"space-y-1",children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Live Conversion Rate:"}),(0,r.jsxs)("p",{children:["1 SUI = ",N(G)]}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Updates every minute"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"SUI price currently unavailable"}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"SUI conversion will be applied at transaction time"})]})}),(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]})})};a.useEffect(()=>{U||w.push("/")},[U,w]);let ea=(e,t)=>{F(s=>({...s,[e]:t}))},el=(e,t)=>{let s=et(t),r=es(s);"contributionAmountUSD"===e?F(e=>({...e,contributionAmountUSD:s,contributionAmount:r})):F(e=>({...e,securityDepositUSD:s,securityDeposit:r}))},ei=(e,t)=>{F(s=>({...s,penaltyRules:{...s.penaltyRules,[e]:t}}))},en=async e=>{e.preventDefault(),Q([]),ee(null);let t=b(_);if(t.length>0){Q(t);return}if(!E){Q(["SUI price is currently unavailable. Please try again later."]);return}try{var s,r;let e=p(_,G);console.log("Circle Creation Data:",{contributionAmountUSD:_.contributionAmountUSD.toFixed(2),securityDepositUSD:_.securityDepositUSD.toFixed(2),suiPrice:G.toFixed(4),contributionAmountMIST:e.contribution_amount.toString(),securityDepositMIST:e.security_deposit.toString(),expectedSUIAmount:(_.contributionAmountUSD/G).toFixed(6),expectedMIST:Math.round(_.contributionAmountUSD/G*1e9)});let t={...e,contribution_amount:e.contribution_amount.toString(),contribution_amount_usd:e.contribution_amount_usd,security_deposit:e.security_deposit.toString(),security_deposit_usd:e.security_deposit_usd,target_amount:(null===(s=e.target_amount)||void 0===s?void 0:s.some)?{some:e.target_amount.some.toString()}:{none:null},target_amount_usd:e.target_amount_usd,target_date:(null===(r=e.target_date)||void 0===r?void 0:r.some)?{some:e.target_date.some.toString()}:{none:null}},a=await fetch("/api/zkLogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sendTransaction",account:D,circleData:t})}),l=await a.json();if(!a.ok){if(401===a.status){w.push("/dashboard");return}throw Error(l.error||"Transaction failed.")}P(2)}catch(e){console.error("Error creating circle:",e),ee(e instanceof Error?e.message:"Failed to create circle. Please try again.")}};return(a.useEffect(()=>{let e=sessionStorage.getItem("createCircleFormData");if(e)try{F(JSON.parse(e)),sessionStorage.removeItem("createCircleFormData")}catch(e){console.error("Error restoring form data:",e)}},[]),U)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("main",{className:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-blue-600 mb-4 px-4",children:"Create New Njangi Circle"}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:0===L?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Choose Circle Type"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Select the type of Njangi circle you want to create"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[(0,r.jsxs)("button",{onClick:()=>{F(e=>({...e,cycleType:"rotational"})),P(1)},className:"p-6 border rounded-lg hover:border-blue-500 hover:shadow-md transition-all text-center group",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Rotational Circle"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Members contribute regularly and take turns receiving the full pot in a predetermined order"})]}),(0,r.jsxs)("button",{onClick:()=>{F(e=>({...e,cycleType:"smart-goal"})),P(1)},className:"p-6 border rounded-lg hover:border-blue-500 hover:shadow-md transition-all text-center group",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Smart Goal Circle"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Members contribute towards a shared savings goal with automatic distribution upon completion"})]})]}),(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsxs)("button",{onClick:()=>w.push("/dashboard"),className:"group inline-flex items-center px-6 py-3 text-base font-medium text-gray-700 bg-white border-2 border-gray-200 rounded-xl shadow-sm hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2 text-gray-400 group-hover:text-gray-500 transition-colors duration-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})}),"Return to Dashboard"]})})]}):1===L?(0,r.jsxs)("form",{onSubmit:en,className:"space-y-8",children:[X&&(0,r.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:X})]})]})}),Y.length>0&&(0,r.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Please fix the following issues:"}),(0,r.jsx)("ul",{className:"mt-2 text-sm text-yellow-700 list-disc list-inside",children:Y.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Group Name"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"Choose a unique and memorable name for your Njangi circle"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Example: “Monthly Savings Group 2024”"})]})]}),(0,r.jsx)("input",{type:"text",name:"name",id:"name",required:!0,value:_.name,onChange:e=>ea("name",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white",placeholder:"Enter your circle's name"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contribution Amount"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"The USD amount each member contributes per cycle"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"This amount will remain stable in USD value"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"The SUI amount will adjust based on current price"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(er,{sui:_.contributionAmount,usd:_.contributionAmountUSD,className:"text-sm text-blue-600 font-medium"}),I?(0,r.jsx)("button",{type:"button",onClick:()=>A(!1),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Use Slider"}):(0,r.jsx)("button",{type:"button",onClick:()=>A(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Custom Amount"})]})]}),(0,r.jsx)("div",{className:"px-3 py-2 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-700",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"mr-2 mt-0.5",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"USD-Pegged Contributions"}),(0,r.jsx)("p",{className:"mt-1 text-xs",children:"All contributions and security deposits are stored in USD value and converted to SUI at the current exchange rate when transactions occur. This provides stability against SUI price fluctuations."})]})]})}),I?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",value:_.contributionAmountUSD||"",onChange:e=>{let t=""===e.target.value?0:parseFloat(e.target.value);isNaN(t)||el("contributionAmountUSD",t)},placeholder:"Enter amount in USD",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0",step:"0.01"}),(0,r.jsx)("span",{className:"text-gray-500",children:"USD"})]}):(0,r.jsx)(d.Kq,{children:(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsx)("div",{className:"px-2",children:(0,r.jsxs)(n.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:[_.contributionAmountUSD],max:1e3,step:20,onValueChange:e=>{let[t]=e;return el("contributionAmountUSD",t)},children:[(0,r.jsx)(n.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,r.jsx)(n.Q6,{className:"absolute bg-blue-500 rounded-full h-full"})}),(0,r.jsx)(n.zi,{className:"block w-5 h-5 bg-white shadow-lg rounded-full border-2 border-blue-500 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Contribution amount"})]})})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-3 py-2 rounded text-sm",sideOffset:5,children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{children:"Drag to adjust contribution amount"}),(0,r.jsxs)("p",{className:"text-gray-300",children:[N(_.contributionAmountUSD)," per cycle"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["≈ ",_.contributionAmount.toFixed(2)," SUI at current price"]})]}),(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]})})]}),"rotational"===_.cycleType&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rotation Style"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"How the rotation order is determined"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Fixed: Members receive funds in a predetermined order"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Auction-based: Members can bid for earlier positions"})]})]}),(0,r.jsxs)(o.bL,{value:_.rotationStyle,onValueChange:e=>ea("rotationStyle",e),children:[(0,r.jsxs)(o.l9,{className:"inline-flex items-center justify-between w-full px-3 py-2 text-sm bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Rotation style",children:[(0,r.jsx)(o.WT,{}),(0,r.jsx)(o.In,{className:"ml-2",children:(0,r.jsx)(f,{})})]}),(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{className:"overflow-hidden bg-white rounded-md shadow-lg",children:(0,r.jsxs)(o.LM,{className:"p-1",children:[(0,r.jsxs)(o.q7,{value:"fixed",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Fixed Order"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]}),(0,r.jsxs)(o.q7,{value:"auction-based",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Auction-based"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]})]})})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cycle Length"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"How often the group meets and contributions are made"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Weekly: More frequent, smaller amounts"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Bi-weekly: Twice a month"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Monthly: Most common option"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Quarterly: Larger amounts, less frequent"})]})]}),(0,r.jsxs)(o.bL,{value:_.cycleLength,onValueChange:e=>{ea("cycleLength",e),ea("cycleDay","weekly"===e||"bi-weekly"===e?"monday":1)},children:[(0,r.jsxs)(o.l9,{className:"inline-flex items-center justify-between w-full px-3 py-2 text-sm bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Cycle length",children:[(0,r.jsx)(o.WT,{}),(0,r.jsx)(o.In,{className:"ml-2",children:(0,r.jsx)(f,{})})]}),(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{className:"overflow-hidden bg-white rounded-md shadow-lg",children:(0,r.jsxs)(o.LM,{className:"p-1",children:[(0,r.jsxs)(o.q7,{value:"weekly",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Weekly"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]}),(0,r.jsxs)(o.q7,{value:"bi-weekly",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Bi-weekly"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]}),(0,r.jsxs)(o.q7,{value:"monthly",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Monthly"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]}),(0,r.jsxs)(o.q7,{value:"quarterly",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Quarterly"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]})]})})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"weekly"===_.cycleLength||"bi-weekly"===_.cycleLength?"Day of Week":"Day of Month"}),(0,r.jsx)(S,{children:"weekly"===_.cycleLength||"bi-weekly"===_.cycleLength?(0,r.jsx)("p",{children:"Select which day of the week contributions are due (or meetings occur)"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Select which day of the month contributions are due (or meetings occur)"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Limited to days 1-28 to ensure consistency across months"})]})})]}),(0,r.jsxs)(o.bL,{value:_.cycleDay.toString(),onValueChange:e=>{"weekly"===_.cycleLength||"bi-weekly"===_.cycleLength?ea("cycleDay",e):ea("cycleDay",parseInt(e))},children:[(0,r.jsxs)(o.l9,{className:"inline-flex items-center justify-between w-full px-3 py-2 text-sm bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"weekly"===_.cycleLength||"bi-weekly"===_.cycleLength?"Day of week":"Day of month",children:[(0,r.jsx)(o.WT,{}),(0,r.jsx)(o.In,{className:"ml-2",children:(0,r.jsx)(f,{})})]}),(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{className:"overflow-hidden bg-white rounded-md shadow-lg",children:(0,r.jsx)(o.LM,{className:"p-1",children:"weekly"===_.cycleLength||"bi-weekly"===_.cycleLength?k.map(e=>{let{value:t,label:s}=e;return(0,r.jsxs)(o.q7,{value:t,className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:s}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]},t)}):C.map(e=>(0,r.jsxs)(o.q7,{value:e.toString(),className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsxs)(o.p4,{children:[e,v(e)]}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]},e))})})})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Security Deposit"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"One-time deposit to ensure member commitment"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Fixed in USD value, converted to SUI at current price"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Refundable when leaving the circle in good standing"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(er,{sui:_.securityDeposit,usd:_.securityDepositUSD,className:"text-sm text-blue-600 font-medium"}),M?(0,r.jsx)("button",{type:"button",onClick:()=>T(!1),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Use Slider"}):(0,r.jsx)("button",{type:"button",onClick:()=>T(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Custom Amount"})]})]}),(0,r.jsx)("div",{className:"px-3 py-2 bg-green-50 border border-green-200 rounded-md text-sm text-green-700",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"mr-2 mt-0.5",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Stable Security Deposit"}),(0,r.jsx)("p",{className:"mt-1 text-xs",children:"The security deposit is stored as a USD value on-chain. Members will always deposit the same USD value regardless of SUI price, ensuring fairness across time."})]})]})}),M?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",value:_.securityDepositUSD||"",onChange:e=>{let t=""===e.target.value?0:parseFloat(e.target.value);isNaN(t)||el("securityDepositUSD",t)},placeholder:"Enter amount in USD",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:"0",step:"0.01"}),(0,r.jsx)("span",{className:"text-gray-500",children:"USD"})]}):(0,r.jsx)(d.Kq,{children:(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsx)("div",{className:"px-2",children:(0,r.jsxs)(n.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:[_.securityDepositUSD],max:1e3,step:20,onValueChange:e=>{let[t]=e;return el("securityDepositUSD",t)},children:[(0,r.jsx)(n.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,r.jsx)(n.Q6,{className:"absolute bg-blue-500 rounded-full h-full"})}),(0,r.jsx)(n.zi,{className:"block w-5 h-5 bg-white shadow-lg rounded-full border-2 border-blue-500 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Security deposit"})]})})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-3 py-2 rounded text-sm",sideOffset:5,children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{children:"Drag to adjust security deposit"}),(0,r.jsxs)("p",{className:"text-gray-300",children:["One-time deposit: ",N(_.securityDepositUSD)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["≈ ",_.securityDeposit.toFixed(2)," SUI at current price"]})]}),(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]})})]}),"smart-goal"===_.cycleType&&(0,r.jsxs)("div",{className:"space-y-6 border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Smart Goal Settings"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Goal Type"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"Choose how you want to define your group's goal"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Amount-based: Set a specific savings target"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Date-based: Set a target completion date"})]})]}),(0,r.jsxs)(o.bL,{value:(null===(e=_.smartGoal)||void 0===e?void 0:e.goalType)||"amount",onValueChange:e=>{F(t=>{var s;return{...t,smartGoal:{...t.smartGoal,goalType:e,targetAmount:"amount"===e?0:void 0,targetDate:void 0,verificationRequired:(null===(s=t.smartGoal)||void 0===s?void 0:s.verificationRequired)||!1}}})},children:[(0,r.jsxs)(o.l9,{className:"inline-flex items-center justify-between w-full px-3 py-2 text-sm bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Goal type",children:[(0,r.jsx)(o.WT,{}),(0,r.jsx)(o.In,{className:"ml-2",children:(0,r.jsx)(f,{})})]}),(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{className:"overflow-hidden bg-white rounded-md shadow-lg",children:(0,r.jsxs)(o.LM,{className:"p-1",children:[(0,r.jsxs)(o.q7,{value:"amount",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Amount-based Goal"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]}),(0,r.jsxs)(o.q7,{value:"date",className:"relative flex items-center px-8 py-2 text-sm text-gray-700 rounded-md hover:bg-blue-50 hover:text-blue-700 focus:bg-blue-50 focus:text-blue-700 outline-none cursor-pointer",children:[(0,r.jsx)(o.p4,{children:"Date-based Goal"}),(0,r.jsx)(o.VF,{className:"absolute left-2 inline-flex items-center",children:(0,r.jsx)(j,{})})]})]})})})]})]}),(null===(t=_.smartGoal)||void 0===t?void 0:t.goalType)==="amount"&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Target Amount"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"The total USD amount your group aims to save"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Fixed in USD value, not affected by SUI price"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Must be greater than individual contribution amount"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",value:(null===(s=_.smartGoal)||void 0===s?void 0:s.targetAmountUSD)||"",onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)||F(e=>({...e,smartGoal:{...e.smartGoal,targetAmountUSD:t,targetAmount:es(t)}}))},placeholder:"Enter target amount in USD",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:_.securityDepositUSD,step:"100"}),(0,r.jsx)("span",{className:"text-gray-500",children:"USD"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["≈ ",(null===(h=_.smartGoal)||void 0===h?void 0:null===(m=h.targetAmount)||void 0===m?void 0:m.toFixed(2))||"0"," SUI at current price"]})]}),(null===(x=_.smartGoal)||void 0===x?void 0:x.goalType)==="date"&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Target Date"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"When you want to achieve your savings goal"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Must be at least one month in the future"})]})]}),(0,r.jsx)("input",{type:"date",value:(null===(g=_.smartGoal)||void 0===g?void 0:g.targetDate)||"",onChange:e=>{F(t=>({...t,smartGoal:{...t.smartGoal,targetDate:e.target.value}}))},min:new Date(Date.now()+2592e6).toISOString().split("T")[0],className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{className:"text-sm text-gray-700",children:"Require Goal Verification"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"Enable if goal completion needs admin verification"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Useful for goals tied to specific achievements"})]})]}),(0,r.jsx)(c.bL,{checked:(null===(y=_.smartGoal)||void 0===y?void 0:y.verificationRequired)||!1,onCheckedChange:e=>{F(t=>({...t,smartGoal:{...t.smartGoal,verificationRequired:e}}))},className:"w-11 h-6 bg-gray-200 rounded-full relative data-[state=checked]:bg-blue-500 transition-colors duration-200",children:(0,r.jsx)(c.zi,{className:"block w-5 h-5 bg-white rounded-full shadow-lg transition-transform duration-200 transform translate-x-0.5 data-[state=checked]:translate-x-[22px]"})})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Penalty Rules"}),(0,r.jsxs)(S,{children:[(0,r.jsx)("p",{children:"Optional rules to maintain group discipline"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Late Payment: Charge fee for delayed contributions"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Missed Meeting: Penalty for skipping group meetings"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Penalties are deducted from security deposit"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{htmlFor:"latePayment",className:"text-sm text-gray-700",children:"Enable Late Payment Penalties"}),(0,r.jsx)(c.bL,{id:"latePayment",checked:_.penaltyRules.latePayment,onCheckedChange:e=>ei("latePayment",e),className:"w-11 h-6 bg-gray-200 rounded-full relative data-[state=checked]:bg-blue-500 transition-colors duration-200",children:(0,r.jsx)(c.zi,{className:"block w-5 h-5 bg-white rounded-full shadow-lg transition-transform duration-200 transform translate-x-0.5 data-[state=checked]:translate-x-[22px]"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{htmlFor:"missedMeeting",className:"text-sm text-gray-700",children:"Enable Missed Meeting Penalties"}),(0,r.jsx)(c.bL,{id:"missedMeeting",checked:_.penaltyRules.missedMeeting,onCheckedChange:e=>ei("missedMeeting",e),className:"w-11 h-6 bg-gray-200 rounded-full relative data-[state=checked]:bg-blue-500 transition-colors duration-200",children:(0,r.jsx)(c.zi,{className:"block w-5 h-5 bg-white rounded-full shadow-lg transition-transform duration-200 transform translate-x-0.5 data-[state=checked]:translate-x-[22px]"})})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 mb-6 border border-indigo-200 bg-indigo-50 rounded-lg p-4 text-indigo-700",children:[(0,r.jsxs)("h3",{className:"font-semibold text-sm flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 11-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"USD-Pegged Njangi Feature"]}),(0,r.jsxs)("div",{className:"mt-2 text-sm",children:[(0,r.jsx)("p",{children:"This circle will store all monetary values in USD. Key benefits:"}),(0,r.jsxs)("ul",{className:"mt-2 list-disc list-inside space-y-1 text-xs",children:[(0,r.jsx)("li",{children:"Contribution amounts remain stable in USD terms regardless of SUI price"}),(0,r.jsx)("li",{children:"Members joining at different times pay the same real-world value"}),(0,r.jsx)("li",{children:"Security deposits maintain consistent value over time"}),(0,r.jsx)("li",{children:"The UI will always show both USD and equivalent SUI amounts"})]}),(0,r.jsxs)("p",{className:"mt-2 text-xs",children:["Current SUI price: ",G?"$".concat(G.toFixed(4)):"Loading..."]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>w.back(),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Next: Invite Members"})]})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Invite Members"}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Invite ",_.numberOfMembers-1," members to join your Njangi circle"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Direct Invites"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>K("email"),className:"px-3 py-1.5 text-sm font-medium rounded-md ".concat("email"===W?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Email"}),(0,r.jsx)("button",{type:"button",onClick:()=>K("phone"),className:"px-3 py-1.5 text-sm font-medium rounded-md ".concat("phone"===W?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Phone"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("label",{htmlFor:"invite-input",className:"sr-only",children:"email"===W?"Email address":"Phone number"}),(0,r.jsx)("input",{type:"email"===W?"email":"tel",id:"invite-input",value:z,onChange:e=>V(e.target.value),placeholder:"email"===W?"Enter email address":"Enter phone number",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{z&&(O([...q,{type:W,value:z,status:"pending"}]),V(""))},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add"})]}),q.length>0&&(0,r.jsx)("div",{className:"mt-4 space-y-2",children:q.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"email"===e.type?(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}):(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.value})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm ".concat("sent"===e.status?"text-green-600":"error"===e.status?"text-red-600":"text-gray-500"),children:"sent"===e.status?"Sent":"error"===e.status?"Failed":"Pending"}),(0,r.jsx)("button",{type:"button",onClick:()=>{O(q.filter((e,s)=>s!==t))},className:"text-gray-400 hover:text-red-500",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]},t))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Shareable Invite Link"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Share this link with potential members to let them join your circle"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("div",{className:"flex-grow relative",children:[(0,r.jsx)("input",{type:"text",readOnly:!0,value:H||"Generating link...",className:"block w-full rounded-md border-gray-300 bg-gray-50 pr-24 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(H),Z(!0),setTimeout(()=>Z(!1),2e3)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 text-sm font-medium text-blue-600 hover:text-blue-700",children:"Copy Link"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>{$("https://njangi.com/invite/".concat(Math.random().toString(36).slice(2)))},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Generate New Link"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,r.jsx)(d.Kq,{children:(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsx)("button",{type:"button",disabled:!0,className:"px-4 py-2 border border-gray-200 rounded-md shadow-sm text-sm font-medium text-gray-400 bg-gray-50 cursor-not-allowed",children:"Back"})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-3 py-2 rounded text-sm",sideOffset:5,children:[(0,r.jsx)("p",{children:"Circle already created. Going back is not allowed to prevent duplicate creation."}),(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]})}),(0,r.jsx)("button",{type:"button",onClick:()=>{w.push("/dashboard")},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create Circle & Send Invites"})]}),J&&(0,r.jsxs)("div",{className:"fixed top-4 right-4 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg transition-opacity duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Link copied to clipboard!"})]})]})})]})}):null}let f=()=>(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M2.5 4L6 7.5L9.5 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),j=()=>(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M10 3L4.5 8.5L2 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),v=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},N=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),w=()=>(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-400 hover:text-gray-500",children:[(0,r.jsx)("path",{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm0-1.5a6.5 6.5 0 1 0 0-13 6.5 6.5 0 0 0 0 13z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 9a1 1 0 0 1-1-1V7a1 1 0 1 1 2 0v5a1 1 0 0 1-1 1z",fill:"currentColor"})]}),S=e=>{let{children:t}=e;return(0,r.jsx)(d.Kq,{children:(0,r.jsxs)(d.bL,{children:[(0,r.jsx)(d.l9,{asChild:!0,children:(0,r.jsx)("span",{className:"ml-1.5 inline-flex items-center cursor-help",children:(0,r.jsx)(w,{})})}),(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{className:"bg-gray-900 text-white px-3 py-2 rounded text-sm max-w-xs",sideOffset:5,children:[(0,r.jsx)("div",{className:"space-y-1",children:t}),(0,r.jsx)(d.i3,{className:"fill-gray-900"})]})})]})})},k=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],C=Array.from({length:28},(e,t)=>t+1)},2876:(e,t,s)=>{"use strict";s.d(t,{n:()=>a});class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}loadCachedPrice(){{let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let{price:t,timestamp:s}=JSON.parse(e);this.cachedPrice=t,this.lastFetchTime=s}catch(e){console.error("Error parsing cached price data:",e)}}}saveCachedPrice(e,t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify({price:e,timestamp:t}))}getFetchStatus(){return this.fetchStatus}isPriceAvailable(){return null!==this.cachedPrice}getCachedPrice(){return this.cachedPrice}async forceRefreshPrice(){return this.lastFetchTime=0,this.getSUIPrice()}async fetchBinancePrice(){try{let e=await fetch(this.BINANCE_API_URL);if(!e.ok)throw Error("Failed to fetch from Binance");let t=await e.json();if(t&&t.price)return parseFloat(t.price);return null}catch(e){return console.error("Error fetching from Binance:",e),null}}async fetchJupiterPrice(){try{let e=await fetch(this.BACKUP_API_URL);if(!e.ok)throw Error("Failed to fetch from Jupiter");let t=await e.json();if(t&&t.data&&t.data.SUI)return t.data.SUI.price;return null}catch(e){return console.error("Error fetching from Jupiter:",e),null}}async getSUIPrice(){let e=Date.now();if(null!==this.cachedPrice&&e-this.lastFetchTime<this.CACHE_DURATION)return console.log("Using cached SUI price: $".concat(this.cachedPrice," (").concat(Math.floor((e-this.lastFetchTime)/1e3),"s old)")),this.cachedPrice;this.fetchStatus="loading";try{let t=await fetch(this.PRIMARY_API_URL);if(!t.ok)throw Error("Failed to fetch SUI price from primary API");let s=await t.json();return this.cachedPrice=s.sui.usd,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e),this.fetchStatus="success",console.log("Successfully fetched fresh SUI price: $".concat(this.cachedPrice)),this.cachedPrice}catch(r){console.error("Error fetching SUI price from primary API:",r);let t=await this.fetchJupiterPrice();if(null!==t)return this.cachedPrice=t,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e),this.fetchStatus="success",console.log("Successfully fetched SUI price from Jupiter: $".concat(this.cachedPrice)),this.cachedPrice;let s=await this.fetchBinancePrice();if(null!==s)return this.cachedPrice=s,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e),this.fetchStatus="success",console.log("Successfully fetched SUI price from Binance: $".concat(this.cachedPrice)),this.cachedPrice;if(this.fetchStatus="error",null!==this.cachedPrice&&e-this.lastFetchTime<216e5)return console.warn("Using stale cached price: $".concat(this.cachedPrice)),this.cachedPrice;return(null===this.cachedPrice||e-this.lastFetchTime>216e5)&&(console.warn("Using fallback price: $".concat(this.FALLBACK_PRICE)),this.cachedPrice=this.FALLBACK_PRICE,this.lastFetchTime=e,this.saveCachedPrice(this.cachedPrice,e)),this.cachedPrice}}constructor(){this.lastFetchTime=0,this.cachedPrice=null,this.CACHE_DURATION=3e5,this.PRIMARY_API_URL="https://api.coingecko.com/api/v3/simple/price?ids=sui&vs_currencies=usd",this.BACKUP_API_URL="https://price.jup.ag/v4/price?ids=SUI",this.BINANCE_API_URL="https://api.binance.com/api/v3/ticker/price?symbol=SUIUSDT",this.STORAGE_KEY="sui_cached_price",this.FALLBACK_PRICE=3.71,this.fetchStatus="idle",this.loadCachedPrice()}}let a=r.getInstance()}},e=>{var t=t=>e(e.s=t);e.O(0,[912,803,636,593,792],()=>t(436)),_N_E=e.O()}]);