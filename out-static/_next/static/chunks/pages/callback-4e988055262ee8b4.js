(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{2:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/callback",function(){return n(5942)}])},5942:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(4848),o=n(6540),s=n(6715),r=n(3481);function l(){let e=(0,s.useRouter)(),{handleCallback:t,setError:n}=(0,r.A)(),[l,i]=(0,o.useState)("Processing authentication..."),[c,d]=(0,o.useState)(0),[h,u]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=setInterval(()=>{d(e=>e<90?e+5:e)},1e3);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{(async()=>{try{console.log("Processing authentication callback");let n=null,a=window.location.hash.substring(1);if((n=new URLSearchParams(a).get("id_token"))||(console.log("ID token not found in URL hash, checking search params"),n=new URLSearchParams(window.location.search).get("id_token")),!n){console.log("Attempting to extract token from full URL");let e=window.location.href.match(/id_token=([^&]+)/);e&&e[1]&&(n=e[1],console.log("Found token in URL pattern match"))}if(console.log("URL information:",{fullUrl:window.location.href,hash:window.location.hash,search:window.location.search,hashLength:a.length,idTokenFound:!!n}),!n)throw Error("No ID token found in callback URL");i("Generating zero-knowledge proof..."),await t(n),d(100),i("Authentication successful! Redirecting..."),setTimeout(()=>{e.push("/dashboard")},500)}catch(t){console.error("Auth callback error:",t),u(!0),i("Authentication failed"),n(t instanceof Error?t.message:"Authentication failed"),setTimeout(()=>{e.push("/")},2e3)}})()},[t,e,n]),(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:(0,a.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8 text-center",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,a.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:l}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to login page..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:l}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"This may take up to 20 seconds..."}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(c,"%")}})})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2)),_N_E=e.O()}]);